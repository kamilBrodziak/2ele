<section class="checkoutWidget">
    <div class="checkoutWidgetContentWrapper">
        {% if isUserLoggedIn == false %}
            {% set stagesNames = ['Koszyk', 'Logowanie', 'Formularz', 'Dostawa', 'Podsumowanie'] %}
        {% else %}
            {% set stagesNames = ['Koszyk', 'Formularz', 'Dostawa', 'Podsumowanie'] %}
        {% endif %}
        <ul class="orderWidgetStages listStyleNone">
            <li class="orderWidgetStage active"><span>Koszyk</span></li>
            <li class="orderWidgetStage active{% if isUserLoggedIn == false %} current{% endif %}"><span>Logowanie</span></li>
            <li class="orderWidgetStage{% if isUserLoggedIn == true %}active current{% endif %}"><span>Formularz</span></li>
            <li class="orderWidgetStage"><span>Podsumowanie i dostawa</span></li>
            <li class="orderWidgetStage"><span>Płatność</span></li>
        </ul>
        <section class="checkoutWidgetContent">
            {% if isUserLoggedIn == false %}
                <section class="checkoutWidgetLoginContainer">
                    {% include ['partials/widgets/loginWidget.twig'] %}
                </section>
            {% endif %}
{#            <section class="checkoutWidgetCheckoutContainer">#}
{#                {% filter shortcodes %}#}
{#                    [woocommerce_checkout]#}
{#                {% endfilter %}#}
{#            </section>#}
            {% if loginRequired %}
                <span class="checkoutWidgetLoginRequired textAlignCenter">Musisz się zalogować zanim przejdziesz dalej!</span>
            {% else %}
                <form name="checkout" method="post" class="checkout woocommerce-checkout" action="{{ fn('getCheckoutUrl') }}"
                      enctype="multipart/form-data">
                    <section class="checkoutWidgetBilling textAlignCenter styledExternalLinksContainer styledExternalInputContainer styledExternalCheckboxContainer">
                        {% do action('woocommerce_checkout_before_customer_details') %}
                        {% do action('woocommerce_checkout_billing') %}
                        {% do action('woocommerce_checkout_shipping') %}
                        {% do action('woocommerce_checkout_after_customer_details') %}
                    </section>
                    <section class="checkoutWidgetSummary styledExternalTableContainer styledExternalLinksContainer styledExternalCheckboxContainer">
                        <h3 class="header3Gradient">Podsumowanie i dostawa</h3>
                        {% do action('woocommerce_checkout_order_review') %}
                    </section>
                    <section class="checkoutWidgetPayment textAlignCenter styledExternalLinksContainer styledExternalButtonContainer styledExternalCheckboxContainer">
                        <h3 class="header3Gradient">Płatność</h3>
                        {% do action( 'woocommerce_checkout_after_order_review' ) %}
                    </section>
                </form>
            {% endif %}
        </section>
        <nav class="checkoutWidgetNav">
            <div class="checkoutWidgetPreviousLinkContainer">
                <a href='{{ fn('getCartUrl') }}' class="flexCenterCenter checkoutWidgetPreviousLink checkoutWidgetPaginationLink buttonBlackAnimated borderRadiusTen"><< {{ stagesNames[0] }}</a>
            </div>
            <div class="checkoutWidgetPreviousButtonContainer">
                <button class="checkoutWidgetPreviousButton checkoutWidgetPaginationLink buttonBlackAnimated borderRadiusTen"><< {{ stagesNames[1] }}</button>
            </div>
            <div class="checkoutWidgetNextButtonContainer">
                <button class="checkoutWidgetNextButton checkoutWidgetPaginationLink buttonBlackAnimated borderRadiusTen"
                    {% if loginRequired %}disabled{% endif %}>{{ stagesNames[2] }} >></button>
            </div>
        </nav>
{#        <noscript>#}
{#            <div class="orderWidgetCheckoutButtonContainer gradientButton">#}
{#                <a href="{{ fn('getCheckoutUrl') }}"#}
{#                   class="orderWidgetNextButton orderWidgetPaginationLink"#}
{#                   data-stage="{{ nextStage }}" data-direction="next">Zamówienie >></a>#}
{#            </div>#}
{#        </noscript>#}
    </div>
</section>